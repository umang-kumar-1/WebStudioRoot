--- /Users/smalsus/Desktop/Web Studio Root /WebStudioPreview/src/components/PreviewArea.tsx	2026-02-06 14:42:08
+++ /Users/smalsus/Desktop/Web Studio Root /Web Studio/src/webparts/webStudio/components/PreviewArea.tsx	2026-02-16 18:37:32
@@ -1,24 +1,29 @@
-
-// ... existing imports ...
 import React, { useState, useRef, useEffect, useMemo } from 'react';
-import { useNavigate, useLocation } from 'react-router-dom';
-import { useStore, getLocalizedText } from '../store';
-import { ContainerType, ViewMode, type NavItem, ModalType, type ContactQuery, type LanguageCode } from '../types';
+import { useStore, getLocalizedText, getItemTranslation, getGlobalTranslation, GLOBAL_DEFAULT_IMAGE } from '../store';
+import { useSPContext } from '../contexts/SPServiceContext';
+import { ContainerType, ViewMode, NavItem, ModalType, ContactQuery, LanguageCode } from '../types';
 import {
-    Pencil, Type as TypeIcon, ArrowRight, CheckCircle, Check,
+    Pencil, Type as TypeIcon, CheckCircle, Check,
     AlertTriangle, ChevronDown, MapPin, Mail, Phone,
     Linkedin, Facebook, Twitter, Instagram, ChevronLeft, ChevronRight,
-    RefreshCw, FileText, FileSpreadsheet, Presentation, Link as LinkIcon, File, Calendar,
-    Map as MapIcon, Globe, Search, ArrowUp, ArrowDown
+    RefreshCw, FileText, FileSpreadsheet, Presentation, Link as LinkIcon, File,
+    Map as MapIcon, Globe, Search, ArrowUp, ArrowDown, X, Info
 } from 'lucide-react';
 import { ReadMoreModal } from './modals/ReadMoreModal';
+import { NewsEditor } from './modals/NewsManager';
+import { EventEditor } from './modals/EventManager';
+import { DocumentEditor } from './modals/DocumentManager';
+import { ContactEditor } from './modals/ContactManager';
+import { ContainerItemEditor } from './modals/ContainerItemManager';
 
-const SLIDER_IMGS = [
-    "https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=1600&q=80",
-    "https://images.unsplash.com/photo-1556761175-5973dc0f32e7?auto=format&fit=crop&w=1600&q=80",
-    "https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&w=1600&q=80"
-];
 
+const stripHtml = (html: string) => {
+    if (!html) return "";
+    const tmp = document.createElement("DIV");
+    tmp.innerHTML = html;
+    return tmp.textContent || tmp.innerText || "";
+};
+
 // --- HELPER: DOCUMENT ICONS ---
 const getDocIcon = (type: string) => {
     switch (type) {
@@ -119,9 +124,9 @@
 
     // Dynamic slides if available, else mock fallbacks
     const dynamicSlides = container.settings.slides && container.settings.slides.length > 0 ? container.settings.slides : [
-        { title: 'Image Gallery Carousel', sub: 'Default Image Sub Heading', desc: 'A gallery-style carousel with a main image and thumbnail navigation.', img: SLIDER_IMGS[0] },
-        { title: 'Corporate Strategy 2025', sub: 'Growth & Expansion', desc: 'Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.', img: SLIDER_IMGS[1] },
-        { title: 'Employee Wellness Program', sub: 'Health & Balance', desc: 'Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.', img: SLIDER_IMGS[2] },
+        { title: 'Image Gallery Carousel', sub: 'Default Image Sub Heading', desc: 'A gallery-style carousel with a main image and thumbnail navigation.', img: GLOBAL_DEFAULT_IMAGE },
+        { title: 'Corporate Strategy 2025', sub: 'Growth & Expansion', desc: 'Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.', img: GLOBAL_DEFAULT_IMAGE },
+        { title: 'Employee Wellness Program', sub: 'Health & Balance', desc: 'Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.', img: GLOBAL_DEFAULT_IMAGE },
     ];
 
     // Ensure current index is valid
@@ -157,20 +162,20 @@
                     </div>
                     <div className="flex flex-col lg:flex-row gap-12 items-center bg-white">
                         <div className="flex-1 space-y-6">
-                            <h2 className="text-2xl font-bold text-gray-800">{activeSlide.title}</h2>
-                            <h3 className="text-lg text-gray-500 font-medium">{activeSlide.sub || activeSlide.desc}</h3>
-                            <p className="text-sm text-gray-600 leading-relaxed">{activeSlide.desc}</p>
+                            <h2 className="text-2xl font-bold text-gray-800">{getLocalizedText(activeSlide.title, lang)}</h2>
+                            <h3 className="text-lg text-gray-500 font-medium">{getLocalizedText(activeSlide.sub || activeSlide.desc, lang)}</h3>
+                            <p className="text-sm text-gray-600 leading-relaxed">{getLocalizedText(activeSlide.desc, lang)}</p>
                             {activeSlide.cta && (
-                                <button className="px-6 py-2 bg-[var(--primary-color)] text-white font-bold rounded-sm shadow-sm">{activeSlide.cta}</button>
+                                <button className="px-6 py-2 bg-[var(--primary-color)] text-white font-bold rounded-sm shadow-sm">{getLocalizedText(activeSlide.cta, lang)}</button>
                             )}
                             <div className="flex gap-2 pt-4">
-                                <button onClick={prev} className="p-2 bg-gray-200 rounded-sm hover:bg-gray-300"><ChevronLeft className="w-4 h-4" /></button>
+                                <button onClick={prev} className="p-2 bg-gray-200 rounded-sm hover:bg-gray-300"><ChevronLeft className="w-4 h-4" style={{ color: 'var(--icon-color)' }} /></button>
                                 <button onClick={next} className="p-2 bg-[var(--primary-color)] text-white rounded-sm hover:opacity-90"><ChevronRight className="w-4 h-4" /></button>
                             </div>
                         </div>
                         <div className="flex-1 w-full h-[400px] relative">
                             <div className="w-full h-full rounded-lg overflow-hidden shadow-2xl relative">
-                                <img src={activeSlide.img || activeSlide.image || SLIDER_IMGS[0]} className="w-full h-full object-cover" />
+                                <img src={activeSlide.img || activeSlide.image || GLOBAL_DEFAULT_IMAGE} className="w-full h-full object-cover" />
                             </div>
                         </div>
                     </div>
@@ -186,19 +191,19 @@
 
     const renderSlideContent = () => {
         const TextBlock = ({ theme = 'light', align = 'center' }: any) => (
-            <div className={`max-w-4xl space-y-4 ${theme === 'dark' ? 'text-white' : 'text-gray-900'} text-${align} ${align === 'left' ? '' : 'mx-auto'}`}>
+            <div className={`max - w - 4xl space - y - 4 ${theme === 'dark' ? 'text-white' : 'text-gray-900'} text - ${align} ${align === 'left' ? '' : 'mx-auto'} `}>
                 {(container.settings.showSlideTitle !== false) && (
-                    <h2 className="text-5xl font-bold">{activeSlide.title}</h2>
+                    <h2 className="text-5xl font-bold">{getLocalizedText(activeSlide.title, lang)}</h2>
                 )}
                 {(container.settings.showSlideDescription !== false) && (
                     <>
-                        <h3 className="text-2xl font-semibold opacity-90">{activeSlide.sub || (activeSlide.subtitle) || (activeSlide.desc && activeSlide.desc.length < 50 ? activeSlide.desc : '')}</h3>
-                        <p className="text-lg opacity-80 max-w-2xl leading-relaxed mx-auto">{activeSlide.desc}</p>
+                        <h3 className="text-2xl font-semibold opacity-90">{stripHtml(getLocalizedText(activeSlide.sub || (activeSlide.subtitle) || (activeSlide.desc && activeSlide.desc.length < 50 ? activeSlide.desc : ''), lang))}</h3>
+                        <p className="text-lg opacity-80 max-w-2xl leading-relaxed mx-auto">{stripHtml(getLocalizedText(activeSlide.desc, lang))}</p>
                     </>
                 )}
                 {activeSlide.cta && (
                     <button className={`px-8 py-3 font-bold rounded-sm shadow-lg mt-4 ${theme === 'dark' ? 'bg-white text-black hover:bg-gray-100' : 'bg-[var(--primary-color)] text-white hover:opacity-90'}`}>
-                        {activeSlide.cta}
+                        {getLocalizedText(activeSlide.cta, lang)}
                     </button>
                 )}
             </div>
@@ -219,7 +224,7 @@
                         <div
                             className="absolute inset-0 bg-cover bg-center"
                             style={{
-                                backgroundImage: `url(${activeSlide.img || activeSlide.image || SLIDER_IMGS[0]})`,
+                                backgroundImage: `url(${activeSlide.img || activeSlide.image || GLOBAL_DEFAULT_IMAGE})`,
                                 filter: `brightness(${adjustments.brightness}%) contrast(${adjustments.contrast}%)`,
                                 transform: `scale(${adjustments.zoom}) rotate(${adjustments.rotate}deg)`
                             }}
@@ -242,7 +247,7 @@
                         <div
                             className="absolute inset-0 bg-cover bg-center"
                             style={{
-                                backgroundImage: `url(${activeSlide.img || activeSlide.image || SLIDER_IMGS[0]})`,
+                                backgroundImage: `url(${activeSlide.img || activeSlide.image || GLOBAL_DEFAULT_IMAGE})`,
                                 filter: `brightness(${adjustments.brightness}%) contrast(${adjustments.contrast}%)`,
                                 transform: `scale(${adjustments.zoom}) rotate(${adjustments.rotate}deg)`
                             }}
@@ -257,7 +262,7 @@
                 <div
                     className="absolute inset-0 bg-cover bg-center transition-all duration-500"
                     style={{
-                        backgroundImage: `url(${activeSlide.img || activeSlide.image || SLIDER_IMGS[0]})`,
+                        backgroundImage: `url(${activeSlide.img || activeSlide.image || GLOBAL_DEFAULT_IMAGE})`,
                         filter: `brightness(${adjustments.brightness}%) contrast(${adjustments.contrast}%)`,
                         transform: `scale(${adjustments.zoom}) rotate(${adjustments.rotate}deg)`
                     }}
@@ -279,8 +284,8 @@
 
                 {container.settings.arrows !== false && (
                     <>
-                        <button onClick={prev} className="absolute left-4 top-1/2 -translate-y-1/2 bg-white/90 p-3 rounded-sm hover:bg-white transition-colors z-10"><ChevronLeft className="w-6 h-6 text-black" /></button>
-                        <button onClick={next} className="absolute right-4 top-1/2 -translate-y-1/2 bg-white/90 p-3 rounded-sm hover:bg-white transition-colors z-10"><ChevronRight className="w-6 h-6 text-black" /></button>
+                        <button onClick={prev} className="absolute left-4 top-1/2 -translate-y-1/2 bg-white/90 p-3 rounded-sm hover:bg-white transition-colors z-10"><ChevronLeft className="w-6 h-6" style={{ color: 'var(--icon-color)' }} /></button>
+                        <button onClick={next} className="absolute right-4 top-1/2 -translate-y-1/2 bg-white/90 p-3 rounded-sm hover:bg-white transition-colors z-10"><ChevronRight className="w-6 h-6" style={{ color: 'var(--icon-color)' }} /></button>
                     </>
                 )}
             </div>
@@ -291,20 +296,91 @@
 // --- RENDERER 3: DATA GRID ---
 const DataGridRenderer = ({ container, lang }: ComponentRendererProps) => {
     const { settings } = container;
-    const { news, events, documents } = useStore();
+    const {
+        news, events, documents, pages, containerItems, contacts,
+        updateNews, updateEvent, updateDocument, updateContainerItem, updateContact,
+        deleteNews, deleteEvent, deleteDocument, deleteContainerItem, deleteContact,
+        setCurrentPage,
+        viewMode
+    } = useStore();
     const isSlider = settings.layout === 'slider';
     const cols = settings.columns || 3;
     const scrollContainer = useRef<HTMLDivElement>(null);
     const [activeReadMoreItem, setActiveReadMoreItem] = useState<{ item: any, index: number } | null>(null);
+    const [editingItem, setEditingItem] = useState<{ item: any, type: string } | null>(null);
 
     let allItems: any[] = [];
 
     if (settings.source === 'News') {
-        allItems = news.map((n: any) => ({ id: n.id, title: n.title, desc: n.description, date: n.publishDate, img: n.imageUrl, status: n.status }));
+        allItems = news.map(n => ({
+            id: n.id,
+            title: getItemTranslation(n, lang, 'title'),
+            desc: getItemTranslation(n, lang, 'description'),
+            date: n.publishDate,
+            img: n.imageUrl,
+            status: n.status,
+            readMoreText: getItemTranslation(n, lang, 'readMoreText'),
+            translations: n.translations,
+            originalItem: n
+        }));
     } else if (settings.source === 'Event') {
-        allItems = events.map((e: any) => ({ id: e.id, title: e.title, desc: e.description, date: e.eventDate, img: e.imageUrl, status: e.status }));
+        allItems = events.map(e => ({
+            id: e.id,
+            title: getItemTranslation(e, lang, 'title'),
+            desc: getItemTranslation(e, lang, 'description'),
+            date: e.startDate,
+            endDate: e.endDate,
+            img: e.imageUrl,
+            status: e.status,
+            readMoreText: getItemTranslation(e, lang, 'readMoreText'),
+            translations: e.translations,
+            originalItem: e
+        }));
     } else if (settings.source === 'Document') {
-        allItems = documents.map((d: any) => ({ id: d.id, title: d.title, desc: d.description, date: d.date, img: '', status: d.status, type: d.type }));
+        allItems = documents.map(d => ({
+            id: d.id,
+            title: getItemTranslation(d, lang, 'title'),
+            desc: getItemTranslation(d, lang, 'description'),
+            date: d.date,
+            img: '',
+            status: d.status,
+            type: d.type,
+            readMoreText: getItemTranslation(d, lang, 'readMoreText'),
+            translations: d.translations,
+            originalItem: d
+        }));
+    } else if (settings.source === 'Smart Pages') {
+        allItems = pages.map(p => ({
+            id: p.id,
+            title: getLocalizedText(p.title, lang),
+            desc: p.description || '',
+            date: p.modifiedDate,
+            img: '',
+            status: p.status,
+            originalItem: p
+        }));
+    } else if (settings.source === 'Contacts' || settings.source === 'Contact') {
+        allItems = contacts.map(c => ({
+            id: c.id,
+            title: getItemTranslation(c, lang, 'fullName'),
+            desc: getItemTranslation(c, lang, 'jobTitle') + (c.company ? ` - ${getItemTranslation(c, lang, 'company')} ` : ''),
+            date: c.createdDate,
+            img: c.imageUrl || GLOBAL_DEFAULT_IMAGE,
+            status: c.status,
+            readMoreText: '',
+            translations: c.translations,
+            originalItem: c
+        }));
+    } else if (settings.source === 'Container Items') {
+        allItems = containerItems.map(item => ({
+            id: item.id,
+            title: getItemTranslation(item, lang, 'title'),
+            desc: getItemTranslation(item, lang, 'description'),
+            date: item.createdDate || new Date().toISOString(),
+            img: item.imageUrl || '',
+            status: item.status,
+            originalItem: item
+        }));
     } else {
         allItems = [];
     }
@@ -355,8 +431,8 @@
     const getLayoutClasses = () => {
         const pos = settings.imgPos || 'top';
         switch (pos) {
-            case 'left': return { card: 'flex-col md:flex-row', img: 'w-full h-48 md:w-1/3 md:min-h-full' };
-            case 'right': return { card: 'flex-col md:flex-row-reverse', img: 'w-full h-48 md:w-1/3 md:min-h-full' };
+            case 'left': return { card: 'flex-row items-center', img: 'w-24 h-24 m-4' };
+            case 'right': return { card: 'flex-row-reverse items-center', img: 'w-24 h-24 m-4' };
             case 'none': return { card: 'flex-col', img: 'hidden' };
             default: return { card: 'flex-col', img: 'w-full h-48' }; // Top
         }
@@ -390,7 +466,7 @@
                 className={`
                     ${isSlider ? 'flex flex-nowrap overflow-x-hidden snap-x snap-mandatory' : 'grid'} 
                     ${spacingClass}
-                `}
+`}
                 style={{
                     gridTemplateColumns: isSlider ? undefined : `repeat(${cols}, minmax(0, 1fr))`,
                     scrollBehavior: 'smooth'
@@ -403,15 +479,11 @@
                         <div
                             key={item.id}
                             className={`
-                                bg-white border border-gray-200 shadow-sm overflow-hidden group flex 
+bg-white border border-gray-200 shadow-sm overflow-hidden group flex relative
                                 ${layout.card}
                                 ${borderClass} 
                                 ${isSlider ? 'snap-start flex-shrink-0' : ''}
-                            `}
-                            style={{
-                                width: isSlider ? cardWidth : 'auto',
-                                flex: isSlider ? `0 0 ${cardWidth}` : undefined
-                            }}
+`} style={{ width: isSlider ? cardWidth : 'auto', flex: isSlider ? `0 0 ${cardWidth}` : undefined }}
                         >
                             {/* Image Area - Responsive & Conditional */}
                             {settings.imgPos !== 'none' && hasVisual && (
@@ -427,26 +499,54 @@
                                 </div>
                             )}
 
-                            <div className={`p-6 flex-1 flex flex-col ${settings.imgPos === 'none' ? 'text-center items-center' : 'text-left'}`}>
-                                {isNumbered ? (
-                                    <div className="text-4xl font-bold text-gray-200 mb-4 font-mono select-none pointer-events-none group-hover:text-[var(--primary-color)] transition-colors">
-                                        {(idx + 1).toString().padStart(2, '0')}
-                                    </div>
-                                ) : (
-                                    <div className="flex items-center gap-2 mb-3 text-xs text-gray-500">
-                                        <Calendar className="w-4 h-4 text-gray-400" />
-                                        <span>{new Date(item.date).toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' })}</span>
-                                    </div>
+                            {/* No absolute pencil here, we'll put it inline for contacts or title-based items */}
+
+                            <div className={`p-4 flex-1 flex flex-col ${settings.imgPos === 'none' ? 'text-center items-center' : 'text-left'}`}>
+                                {(settings.source !== 'Contacts' && settings.source !== 'Contact') && (
+                                    isNumbered ? (
+                                        <div className="text-3xl font-bold text-gray-200 mb-2 font-mono select-none opacity-50">
+                                            {(idx + 1).toString().padStart(2, '0')}
+                                        </div>
+                                    ) : (
+                                        <div className="flex items-center gap-2 mb-2 text-[10px] font-bold uppercase tracking-wider text-gray-400">
+                                            <span>{new Date(item.date).toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' })}</span>
+                                        </div>
+                                    )
                                 )}
+                                <div className="flex items-center gap-2 mb-2">
+                                    <h3 className="font-bold text-gray-800 text-base group-hover:text-[var(--primary-color)] transition-colors">{item.title}</h3>
+                                    {viewMode === ViewMode.EDIT && (
+                                        <button
+                                            onClick={(e) => {
+                                                e.stopPropagation();
+                                                if (settings.source === 'Smart Pages') {
+                                                    setCurrentPage(item.id);
+                                                } else if (settings.source === 'Contact' || settings.source === 'Contacts') {
+                                                    setEditingItem({ item: item.originalItem, type: 'Contact' });
+                                                } else {
+                                                    setEditingItem({ item: item.originalItem, type: settings.source });
+                                                }
+                                            }}
+                                            className="text-[var(--primary-color)] opacity-60 hover:opacity-100 transition-opacity"
+                                        >
+                                            <Pencil className="w-3.5 h-3.5" />
+                                        </button>
+                                    )}
+                                </div>
 
-                                <h3 className="font-bold text-lg mb-3 text-gray-800 line-clamp-2 leading-tight">{item.title}</h3>
-                                <p className="text-sm text-gray-600 mb-6 line-clamp-3 flex-1 leading-relaxed">{item.desc || 'No description available for this item.'}</p>
+                                {settings.source !== 'Contacts' && settings.source !== 'Contact' && (
+                                    <p className="text-sm text-gray-600 mb-4 line-clamp-2 flex-1 leading-relaxed">{stripHtml(item.desc) || 'No description available for this item.'}</p>
+                                )}
 
                                 <button
                                     onClick={() => setActiveReadMoreItem({ item, index: idx })}
-                                    className={`text-[var(--primary-color)] font-bold text-xs uppercase tracking-wide hover:underline flex items-center gap-1 ${settings.imgPos === 'none' ? 'mt-0' : 'mt-auto self-start'}`}
+                                    className="text-[var(--primary-color)] font-bold text-xs flex items-center gap-1.5 hover:underline group/btn"
                                 >
-                                    Read More <ArrowRight className="w-3 h-3" />
+                                    <span>Read More</span>
+                                    <div className="flex items-center gap-0.5 opacity-80 group-hover/btn:opacity-100">
+                                        <Info className="w-3 h-3" />
+                                        <ChevronRight className="w-3 h-3" />
+                                    </div>
                                 </button>
                             </div>
                         </div>
@@ -455,37 +555,117 @@
 
                 {items.length === 0 && (
                     <div className="col-span-full py-12 text-center border-2 border-dashed border-gray-200 rounded-sm bg-gray-50/50 w-full flex flex-col items-center justify-center">
-                        <AlertTriangle className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+                        <AlertTriangle className="w-8 h-8 mx-auto mb-2" style={{ color: 'var(--icon-color)' }} />
                         <p className="text-gray-500 font-medium">No items tagged for display.</p>
                         <p className="text-xs text-gray-400">Edit the container to connect items.</p>
                     </div>
                 )}
             </div>
 
-            {activeReadMoreItem && (
-                <ReadMoreModal
-                    item={activeReadMoreItem.item}
-                    index={activeReadMoreItem.index}
-                    isNumbered={isNumbered}
-                    onClose={() => setActiveReadMoreItem(null)}
-                />
-            )}
-        </div>
+            {
+                activeReadMoreItem && (
+                    <ReadMoreModal
+                        item={activeReadMoreItem.item}
+                        index={activeReadMoreItem.index}
+                        isNumbered={isNumbered}
+                        onClose={() => setActiveReadMoreItem(null)}
+                    />
+                )
+            }
+
+            {
+                editingItem && editingItem.type === 'News' && (
+                    <NewsEditor
+                        item={editingItem.item}
+                        onSave={(updated: any) => { updateNews(updated); setEditingItem(null); }}
+                        onCancel={() => setEditingItem(null)}
+                        onDelete={(id: string) => { deleteNews(id); setEditingItem(null); }}
+                    />
+                )
+            }
+
+            {
+                editingItem && editingItem.type === 'Event' && (
+                    <EventEditor
+                        item={editingItem.item}
+                        onSave={(updated: any) => { updateEvent(updated); setEditingItem(null); }}
+                        onCancel={() => setEditingItem(null)}
+                        onDelete={(id: string) => { deleteEvent(id); setEditingItem(null); }}
+                    />
+                )
+            }
+
+            {
+                editingItem && editingItem.type === 'Document' && (
+                    <DocumentEditor
+                        item={editingItem.item}
+                        onSave={(updated: any) => { updateDocument(updated); setEditingItem(null); }}
+                        onCancel={() => setEditingItem(null)}
+                        onDelete={(id: string) => { deleteDocument(id); setEditingItem(null); }}
+                    />
+                )
+            }
+            {
+                editingItem && editingItem.type === 'Contact' && (
+                    <ContactEditor
+                        item={editingItem.item}
+                        onSave={(updated: any) => { updateContact(updated); setEditingItem(null); }}
+                        onCancel={() => setEditingItem(null)}
+                        onDelete={(id: string) => { deleteContact(id); setEditingItem(null); }}
+                    />
+                )
+            }
+            {
+                editingItem && (editingItem.type === 'Container Items' || editingItem.type === 'ContainerItems') && (
+                    <ContainerItemEditor
+                        item={editingItem.item}
+                        onSave={(updated: any) => { updateContainerItem(updated); setEditingItem(null); }}
+                        onCancel={() => setEditingItem(null)}
+                        onDelete={(id: string) => { deleteContainerItem(id); setEditingItem(null); }}
+                    />
+                )
+            }
+        </div >
     );
 };
 
 // --- RENDERER 4: CONTACT FORM (UPDATED) ---
-const ContactFormRenderer = ({ container, pageTitle }: ComponentRendererProps) => {
+const ContactFormRenderer = ({ container, lang, pageTitle }: ComponentRendererProps) => {
     const { addContactQuery } = useStore();
     const { settings } = container;
     const fields = settings.fields || [];
 
+    // Helper function to generate random CAPTCHA
+    const generateCaptcha = () => {
+        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
+        let captcha = '';
+        for (let i = 0; i < 6; i++) {
+            captcha += chars.charAt(Math.floor(Math.random() * chars.length));
+        }
+        return captcha;
+    };
+
     // State for form data and UI feedback
     const [formData, setFormData] = useState<Record<string, any>>({});
     const [privacyAccepted, setPrivacyAccepted] = useState(false);
     const [status, setStatus] = useState<'IDLE' | 'SUCCESS' | 'ERROR'>('IDLE');
     const [errors, setErrors] = useState<Record<string, boolean>>({});
+    const [captchaValue, setCaptchaValue] = useState('');
+    const [generatedCaptcha, setGeneratedCaptcha] = useState(generateCaptcha());
+
+    // Refresh CAPTCHA when component mounts or when manually triggered
+    React.useEffect(() => {
+        setGeneratedCaptcha(generateCaptcha());
+    }, []);
 
+    const handleRefreshCaptcha = () => {
+        setGeneratedCaptcha(generateCaptcha());
+        setCaptchaValue('');
+        if (errors.captcha) {
+            setErrors(prev => ({ ...prev, captcha: false }));
+        }
+    };
+
     const handleInputChange = (id: string, value: any) => {
         setFormData(prev => ({ ...prev, [id]: value }));
         // Clear error when user types/changes
@@ -520,6 +700,12 @@
             hasError = true;
         }
 
+        // Case-insensitive CAPTCHA validation
+        if (captchaValue.toUpperCase() !== generatedCaptcha.toUpperCase()) {
+            newErrors['captcha'] = true;
+            hasError = true;
+        }
+
         if (hasError) {
             setErrors(newErrors);
             setStatus('ERROR');
@@ -580,6 +766,8 @@
         setStatus('SUCCESS');
         setFormData({}); // Reset form
         setPrivacyAccepted(false);
+        setCaptchaValue('');
+        setGeneratedCaptcha(generateCaptcha()); // Generate new CAPTCHA
         setErrors({});
 
         // Reset status after delay
@@ -600,19 +788,24 @@
                 {/* Success Message Overlay */}
                 {status === 'SUCCESS' ? (
                     <div className="absolute inset-0 z-20 bg-white flex flex-col items-center justify-center text-center p-8 animate-in fade-in zoom-in-95">
-                        <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 text-green-600">
-                            <CheckCircle className="w-8 h-8" />
+                        <div className="w-16 h-16 bg-green-50 rounded-full flex items-center justify-center mb-6 ring-8 ring-green-50">
+                            <CheckCircle className="w-10 h-10" style={{ color: 'var(--status-success, #16a34a)' }} />
                         </div>
-                        <h3 className="text-2xl font-bold text-gray-800 mb-2">Message Sent!</h3>
-                        <p className="text-gray-500">Thank you for contacting us. We will get back to you shortly.</p>
-                        <button onClick={() => setStatus('IDLE')} className="mt-6 text-[var(--primary-color)] font-bold hover:underline">Send another message</button>
+                        <h3 className="text-2xl font-bold text-gray-900 mb-2">Message Received!</h3>
+                        <p className="text-gray-500 max-w-xs mx-auto">We've received your inquiry and will get back to you within 24 hours.</p>
+                        <button
+                            onClick={() => setStatus('IDLE')}
+                            className="mt-8 px-6 py-2 border border-gray-200 text-gray-500 font-bold text-xs uppercase hover:bg-gray-50 rounded-sm"
+                        >
+                            Send another message
+                        </button>
                     </div>
                 ) : null}
 
                 <div className={`text-${settings.alignment === 'center' ? 'center' : 'left'} mb-8`}>
-                    {settings.heading && <h2 className="text-3xl font-bold text-[var(--primary-color)] mb-2">{settings.heading}</h2>}
-                    {settings.subheading && <p className="text-gray-500 text-sm font-medium">{settings.subheading}</p>}
-                    {settings.description && <p className="text-gray-400 text-xs mt-2">{settings.description}</p>}
+                    {settings.heading && <h2 className="text-3xl font-bold text-[var(--primary-color)] mb-2">{getLocalizedText(settings.heading, lang)}</h2>}
+                    {settings.subheading && <p className="text-gray-500 text-sm font-medium">{getLocalizedText(settings.subheading, lang)}</p>}
+                    {settings.description && <p className="text-gray-400 text-xs mt-2">{getLocalizedText(settings.description, lang)}</p>}
                 </div>
 
                 <div className="space-y-4">
@@ -633,14 +826,16 @@
                                 />
                             ) : f.type === 'checkbox' ? (
                                 <label className="flex items-start gap-2 cursor-pointer group">
-                                    <div className="relative flex items-center mt-0.5">
+                                    <div className="relative flex items-center justify-center mt-0.5 w-4 h-4 flex-shrink-0">
                                         <input
                                             type="checkbox"
-                                            className={`peer h-4 w-4 cursor-pointer appearance-none rounded-sm border ${errors[f.id] ? 'border-red-500' : 'border-gray-300'} bg-white checked:border-[var(--primary-color)] checked:bg-[var(--primary-color)] transition-all focus:ring-1 focus:ring-[var(--primary-color)] focus:outline-none`}
+                                            className={`h-4 w-4 cursor-pointer appearance-none rounded-sm border ${errors[f.id] ? 'border-red-500' : 'border-gray-300'} bg-white transition-all focus:ring-1 focus:ring-[var(--primary-color)] focus:outline-none ${formData[f.id] ? 'border-[var(--primary-color)] bg-[var(--primary-color)]' : ''}`}
                                             checked={!!formData[f.id]}
                                             onChange={(e) => handleInputChange(f.id, e.target.checked)}
                                         />
-                                        <Check className="pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 text-white opacity-0 peer-checked:opacity-100" />
+                                        {formData[f.id] && (
+                                            <Check className="pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 text-white" />
+                                        )}
                                     </div>
                                     <span className="text-sm text-gray-700 leading-tight select-none group-hover:text-black">
                                         {f.label} {f.required && <span className="text-red-500">*</span>}
@@ -675,17 +870,19 @@
                     ))}
 
                     <label className="flex items-start gap-2 mt-4 cursor-pointer group">
-                        <div className="relative flex items-center mt-0.5">
+                        <div className="relative flex items-center justify-center mt-0.5 w-4 h-4 flex-shrink-0">
                             <input
                                 type="checkbox"
-                                className="peer h-4 w-4 cursor-pointer appearance-none rounded-sm border border-gray-300 bg-white checked:border-[var(--primary-color)] checked:bg-[var(--primary-color)] transition-all focus:ring-1 focus:ring-[var(--primary-color)] focus:outline-none"
+                                className="h-4 w-4 cursor-pointer rounded-sm border border-gray-300 focus:ring-1 focus:ring-[var(--primary-color)] focus:outline-none"
                                 checked={privacyAccepted}
                                 onChange={(e) => {
                                     setPrivacyAccepted(e.target.checked);
                                     if (e.target.checked) setErrors(prev => ({ ...prev, privacy: false }));
                                 }}
                             />
-                            <Check className="pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 text-white opacity-0 peer-checked:opacity-100" />
+                            {privacyAccepted && (
+                                <Check className="pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 text-white" />
+                            )}
                         </div>
                         <span className="text-xs text-gray-500 leading-tight select-none group-hover:text-gray-700">
                             I have read the Privacy Policy note. I agree that my contact details and questions will be stored permanently.
@@ -694,15 +891,34 @@
                     {errors.privacy && <p className="text-[10px] text-red-500 mt-1 font-bold">You must accept the privacy policy.</p>}
 
                     <div className="pt-4">
-                        <label className="block text-xs font-bold text-gray-500 uppercase mb-1">Captcha: rcy9rg <RefreshCw className="inline w-3 h-3 ml-1" /></label>
-                        <input className="w-full border border-gray-300 p-2 text-sm bg-white rounded-sm" placeholder="Enter Captcha" disabled />
+                        <label className="block text-xs font-bold text-gray-500 uppercase mb-2">
+                            CAPTCHA: <span className="text-blue-600 select-none" style={{ userSelect: 'none' }}>{generatedCaptcha}</span>
+                            <button
+                                type="button"
+                                onClick={handleRefreshCaptcha}
+                                className="inline-flex items-center ml-2 text-blue-600 hover:text-blue-800 transition-colors"
+                                title="Refresh CAPTCHA"
+                            >
+                                <RefreshCw className="w-3 h-3" />
+                            </button>
+                        </label>
+                        <input
+                            className={`w-full border p-2 text-sm bg-white rounded-sm outline-none focus:ring-1 focus:ring-[var(--primary-color)] ${errors.captcha ? 'border-red-500 bg-red-50' : 'border-gray-300'}`}
+                            placeholder="Enter Captcha"
+                            value={captchaValue}
+                            onChange={(e) => {
+                                setCaptchaValue(e.target.value);
+                                if (errors.captcha) setErrors(prev => ({ ...prev, captcha: false }));
+                            }}
+                        />
+                        {errors.captcha && <p className="text-[10px] text-red-500 mt-1 font-bold">Incorrect Captcha.</p>}
                     </div>
 
                     <button
                         onClick={handleSubmit}
-                        className="w-full bg-[var(--primary-color)] text-white py-3 font-bold text-sm shadow-md opacity-80 cursor-not-allowed uppercase tracking-wider rounded-sm mt-4"
+                        className="w-full bg-[var(--primary-color)] text-white py-3 font-bold text-sm shadow-md hover:opacity-90 uppercase tracking-wider rounded-sm mt-4 transition-opacity"
                     >
-                        {settings.buttonText || 'Send Message'}
+                        {getLocalizedText(settings.buttonText || 'Send Message', lang)}
                     </button>
                 </div>
             </div>
@@ -775,12 +991,21 @@
                 {settings.enableGlobalSearch && (
                     <div className="relative max-w-md mt-4">
                         <input
-                            className="w-full border border-gray-300 pl-10 p-2.5 text-sm rounded-sm focus:ring-1 focus:ring-[var(--primary-color)] outline-none"
+                            className="w-full border border-gray-300 pl-10 pr-10 p-2.5 text-sm rounded-sm focus:ring-1 focus:ring-[var(--primary-color)] outline-none"
                             placeholder="Global Search..."
                             value={searchQuery}
                             onChange={(e) => setSearchQuery(e.target.value)}
                         />
                         <Search className="absolute left-3 top-3 w-4 h-4 text-gray-400" />
+                        {searchQuery && (
+                            <button
+                                onClick={() => setSearchQuery('')}
+                                className="absolute right-3 top-3 text-gray-400 hover:text-gray-600 transition-colors"
+                                title="Clear search"
+                            >
+                                <X className="w-4 h-4" />
+                            </button>
+                        )}
                     </div>
                 )}
             </div>
@@ -809,7 +1034,7 @@
                                                 <div
                                                     className="absolute right-2 top-1/2 -translate-y-1/2 flex flex-col cursor-pointer gap-0.5"
                                                     onClick={() => handleSort(col.id)}
-                                                    title={`Sort by ${col.header}`}
+                                                    title={`Sort by ${col.header} `}
                                                 >
                                                     <ArrowUp className={`w-2 h-2 ${isAsc ? 'text-blue-600' : 'text-gray-300 hover:text-gray-500'}`} />
                                                     <ArrowDown className={`w-2 h-2 ${isDesc ? 'text-blue-600' : 'text-gray-300 hover:text-gray-500'}`} />
@@ -940,7 +1165,16 @@
         <div className={`relative group ${viewMode === ViewMode.EDIT ? 'hover:ring-2 hover:ring-blue-400 cursor-pointer' : ''}`}>
             {viewMode === ViewMode.EDIT && (
                 <div className="absolute top-4 right-4 z-40 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
-                    <button onClick={handleEdit} className="bg-blue-600 text-white p-2 rounded-none shadow-md hover:bg-blue-700">
+                    <button
+                        onClick={handleEdit}
+                        className="p-2 rounded-none shadow-md hover:opacity-90 transition-all"
+                        style={{
+                            backgroundColor: 'var(--edit-icon-bg, #2563eb)',
+                            color: 'var(--edit-icon-color, #ffffff)',
+                        }}
+                        onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = 'var(--edit-icon-hover-bg, #1d4ed8)')}
+                        onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'var(--edit-icon-bg, #2563eb)')}
+                    >
                         <Pencil className="w-4 h-4" />
                     </button>
                 </div>
@@ -970,6 +1204,7 @@
 }
 
 const TopNavDropdownItem: React.FC<TopNavItemProps> = ({ item, allItems, onNavigate }) => {
+    const { currentLanguage } = useStore();
     const children = allItems.filter(n => n.parentId === item.id && n.isVisible).sort((a, b) => a.order - b.order);
     const hasChildren = children.length > 0;
 
@@ -980,6 +1215,8 @@
         }
     };
 
+    const localizedTitle = getItemTranslation(item, currentLanguage, 'title');
+
     return (
         <div className="relative group/menuitem h-full flex items-center">
             <a
@@ -989,7 +1226,7 @@
                 className="text-sm font-bold uppercase tracking-wide hover:opacity-70 transition-opacity flex items-center gap-1 py-2"
                 style={{ color: 'var(--text-primary)' }}
             >
-                {item.title}
+                {localizedTitle}
                 {hasChildren && <ChevronDown className="w-3 h-3 opacity-50" />}
             </a>
 
@@ -1008,6 +1245,7 @@
 };
 
 const TopNavSubItem: React.FC<TopNavItemProps> = ({ item, allItems, onNavigate }) => {
+    const { currentLanguage } = useStore();
     const children = allItems.filter(n => n.parentId === item.id && n.isVisible).sort((a, b) => a.order - b.order);
     const hasChildren = children.length > 0;
 
@@ -1018,6 +1256,8 @@
         }
     };
 
+    const localizedTitle = getItemTranslation(item, currentLanguage, 'title');
+
     return (
         <div className="relative group/submenu px-4 py-2 hover:bg-gray-100">
             <a
@@ -1026,7 +1266,7 @@
                 target={item.openInNewTab ? '_blank' : '_self'}
                 className="text-sm font-medium text-gray-700 flex justify-between items-center"
             >
-                {item.title}
+                {localizedTitle}
                 {hasChildren && <span className="text-xs">â€º</span>}
             </a>
 
@@ -1045,31 +1285,26 @@
 };
 
 export const PreviewArea: React.FC = () => {
-    const { pages, currentPageId, setCurrentPage, viewMode, siteConfig, currentLanguage, setLanguage } = useStore();
-    const navigate = useNavigate();
-    const location = useLocation();
-    const activePage = pages.find((p: any) => p.id === currentPageId);
+    const { pages, currentPageId, setCurrentPage, viewMode, siteConfig, currentLanguage, translationItems } = useStore();
+    const { context } = useSPContext();
+    const activePage = pages.find(p => p.id === currentPageId);
     const footerConfig = siteConfig.footer;
 
-    // Sync URL with current page on mount and when location changes
-    useEffect(() => {
-        const currentPath = location.pathname;
-        const pageFromUrl = pages.find(p => p.slug === currentPath || (currentPath === '/' && p.slug === '/'));
+    const siteUrl = context.pageContext.web.absoluteUrl;
 
-        if (pageFromUrl && pageFromUrl.id !== currentPageId) {
-            setCurrentPage(pageFromUrl.id);
-        } else if (!pageFromUrl && activePage) {
-            // If URL doesn't match any page, navigate to current page's slug
-            navigate(activePage.slug || '/', { replace: true });
+    const handleInternalLink = (e: React.MouseEvent, url: string) => {
+        if (!url) return;
+        // Normalize URL for check
+        const normalizedUrl = url.startsWith('/') ? `${siteUrl}${url === '/' ? '' : url}` : url;
+        if (normalizedUrl.startsWith(siteUrl)) {
+            const path = normalizedUrl.replace(siteUrl, '') || '/';
+            const targetPage = pages.find(p => p.slug === path || (path === '/' && p.slug === '/'));
+            if (targetPage) {
+                e.preventDefault();
+                setCurrentPage(targetPage.id);
+            }
         }
-    }, [location.pathname, pages]);
-
-    // Update URL when page changes programmatically
-    useEffect(() => {
-        if (activePage && location.pathname !== activePage.slug) {
-            navigate(activePage.slug || '/', { replace: true });
-        }
-    }, [currentPageId, activePage]);
+    };
 
     // Resolve Background Color
     const getFooterBg = () => {
@@ -1091,16 +1326,16 @@
     const renderNavItems = () => (
         <nav className={`flex items-center gap-6 ${siteConfig.navPosition === 'below_logo' ? `justify-${siteConfig.navAlignment}` : ''} w-full h-full`}>
             {siteConfig.navigation
-                .filter((n: any) => n.parentId === 'root' && n.isVisible)
-                .sort((a: any, b: any) => a.order - b.order)
-                .map((link: any) => (
+                .filter(n => n.parentId === 'root' && n.isVisible)
+                .sort((a, b) => a.order - b.order)
+                .map(link => (
                     <TopNavDropdownItem key={link.id} item={link} allItems={siteConfig.navigation} onNavigate={setCurrentPage} />
                 ))}
         </nav>
     );
 
     const LogoComponent = () => (
-        <div className="flex-shrink-0">
+        <div className="flex-shrink-0 cursor-pointer" onClick={(e) => handleInternalLink(e as any, '/')}>
             {siteConfig.logo.url ? (
                 <img
                     src={siteConfig.logo.url}
@@ -1116,87 +1351,8 @@
         </div>
     );
 
-    // Language Selector Component
-    const LanguageSelector = () => {
-        const [isOpen, setIsOpen] = useState(false);
-        const dropdownRef = useRef<HTMLDivElement>(null);
-
-        // Close dropdown when clicking outside
-        useEffect(() => {
-            const handleClickOutside = (event: MouseEvent) => {
-                if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
-                    setIsOpen(false);
-                }
-            };
-            document.addEventListener('mousedown', handleClickOutside);
-            return () => document.removeEventListener('mousedown', handleClickOutside);
-        }, []);
-
-        const languageNames: Record<LanguageCode, string> = {
-            en: 'English',
-            de: 'Deutsch',
-            fr: 'FranÃ§ais',
-            es: 'EspaÃ±ol'
-        };
-
-        const languageFlags: Record<LanguageCode, string> = {
-            en: 'ðŸ‡¬ðŸ‡§',
-            de: 'ðŸ‡©ðŸ‡ª',
-            fr: 'ðŸ‡«ðŸ‡·',
-            es: 'ðŸ‡ªðŸ‡¸'
-        };
-
-        return (
-            <div className="relative" ref={dropdownRef}>
-                <button
-                    onClick={() => setIsOpen(!isOpen)}
-                    className="flex items-center gap-2 px-3 py-2 rounded-sm hover:bg-gray-100 transition-colors border border-gray-200 bg-white"
-                    aria-label="Select Language"
-                >
-                    <Globe className="w-4 h-4 text-gray-600" />
-                    <span className="text-sm font-medium text-gray-700 uppercase">{currentLanguage}</span>
-                    <ChevronDown className={`w-4 h-4 text-gray-500 transition-transform ${isOpen ? 'rotate-180' : ''}`} />
-                </button>
-
-                {isOpen && (
-                    <div className="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-sm shadow-lg z-50 overflow-hidden">
-                        {siteConfig.languages.map((lang) => (
-                            <button
-                                key={lang}
-                                onClick={() => {
-                                    setLanguage(lang);
-                                    setIsOpen(false);
-                                }}
-                                className={`w-full px-4 py-3 text-left text-sm flex items-center gap-3 hover:bg-gray-50 transition-colors ${currentLanguage === lang ? 'bg-blue-50 text-[var(--primary-color)] font-bold' : 'text-gray-700'
-                                    }`}
-                            >
-                                <span className="text-lg">{languageFlags[lang]}</span>
-                                <span className="flex-1">{languageNames[lang]}</span>
-                                {currentLanguage === lang && <Check className="w-4 h-4" />}
-                            </button>
-                        ))}
-                    </div>
-                )}
-            </div>
-        );
-    };
-
     return (
         <div className="flex-1 bg-gray-200 overflow-hidden flex flex-col relative">
-            {/* Browser Chrome Simulation
-            <div className="bg-white border-b border-gray-300 px-4 py-2 flex items-center justify-between shadow-sm z-20 h-14 flex-shrink-0">
-                <div className="flex items-center gap-3 w-full">
-                    <div className="flex gap-1.5">
-                        <div className="w-3 h-3 rounded-none bg-red-400"></div>
-                        <div className="w-3 h-3 rounded-none bg-yellow-400"></div>
-                        <div className="w-3 h-3 rounded-none bg-green-400"></div>
-                    </div>
-                    <div className="flex-1 bg-gray-100 rounded-none px-3 py-1.5 text-xs text-gray-500 flex justify-between items-center mx-4 font-mono">
-                        <span>https://{siteConfig.name.toLowerCase().replace(/\s/g, '-')}.sharepoint.com{activePage?.slug}</span>
-                        <span className="text-gray-400">ðŸ”’ Secure</span>
-                    </div>
-                </div>
-            </div> */}
 
             {/* Main Website Frame */}
             <div className="flex-1 overflow-y-auto admin-scroll bg-white relative" style={{ backgroundColor: 'var(--bg-body)' }}>
@@ -1216,11 +1372,8 @@
                         {/* Case: Below Logo (Stacked) */}
                         {siteConfig.navPosition === 'below_logo' && (
                             <>
-                                <div className={`flex w-full justify-${siteConfig.logo.position} items-center`}>
+                                <div className={`flex w-full justify-${siteConfig.logo.position}`}>
                                     <LogoComponent />
-                                    <div className="ml-auto">
-                                        <LanguageSelector />
-                                    </div>
                                 </div>
                                 <div className="w-full border-t border-gray-100 pt-2">
                                     {renderNavItems()}
@@ -1253,31 +1406,26 @@
                                         {renderNavItems()}
                                     </div>
                                 )}
-
-                                {/* 3. Language Selector - Always Right */}
-                                <div className="ml-auto">
-                                    <LanguageSelector />
-                                </div>
                             </div>
                         )}
                     </div>
                 </header>
 
                 {activePage ? (
-                    <div className="min-h-[calc(100vh-64px)] flex flex-col">
+                    <div className="min-h-[calc(100vh - 64px)] flex flex-col">
                         {activePage.containers.length > 0 ? (
-                            activePage.containers.map((container: any) => (
+                            activePage.containers.map(container => (
                                 <ContainerWrapper
                                     key={container.id}
                                     container={container}
                                     viewMode={viewMode}
                                     lang={currentLanguage}
-                                    pageTitle={getLocalizedText(activePage.title, 'en')}
+                                    pageTitle={getLocalizedText(activePage.title, currentLanguage)}
                                 />
                             ))
                         ) : (
                             <div className="flex-1 flex flex-col items-center justify-center text-gray-400">
-                                <TypeIcon className="w-12 h-12 mb-4 opacity-20" />
+                                <TypeIcon className="w-12 h-12 mb-4 opacity-20" style={{ color: 'var(--icon-color, #2563eb)' }} />
                                 <p>This page is empty. Add containers to start building.</p>
                             </div>
                         )}
@@ -1295,15 +1443,23 @@
                                     <div className="col-span-1 md:col-span-1">
                                         <h4 className="font-bold mb-4" style={{ fontSize: footerConfig.fontSettings.headingSize }}>{siteConfig.name}</h4>
                                         <p className="opacity-70 max-w-sm" style={{ fontSize: footerConfig.fontSettings.subHeadingSize }}>
-                                            {footerConfig.subFooterText}
+                                            {getGlobalTranslation('footer_sub', translationItems, currentLanguage, footerConfig.subFooterText)}
                                         </p>
                                     </div>
-                                    {footerConfig.columns.map((col: any) => (
+                                    {footerConfig.columns.map(col => (
                                         <div key={col.id}>
-                                            <h5 className="font-bold mb-4 uppercase tracking-wider opacity-80" style={{ fontSize: footerConfig.fontSettings.headingSize }}>{col.title}</h5>
+                                            <h5 className="font-bold mb-4 uppercase tracking-wider opacity-80" style={{ fontSize: footerConfig.fontSettings.headingSize }}>
+                                                {getGlobalTranslation(`footer_col_${col.id}`, translationItems, currentLanguage, col.title)}
+                                            </h5>
                                             <ul className="space-y-2 opacity-70" style={{ fontSize: footerConfig.fontSettings.subHeadingSize }}>
-                                                {col.links.map((link: any) => (
-                                                    <li key={link.id}><a href={link.url} className="hover:underline">{link.label}</a></li>
+                                                {col.links.map(link => (
+                                                    <li key={link.id}><a
+                                                        href={link.url}
+                                                        className="hover:underline"
+                                                        onClick={(e) => handleInternalLink(e, link.url)}
+                                                    >
+                                                        {getGlobalTranslation(`footer_link_${link.id}`, translationItems, currentLanguage, link.label)}
+                                                    </a></li>
                                                 ))}
                                             </ul>
                                         </div>
@@ -1316,23 +1472,23 @@
                                     <div className="space-y-4">
                                         <h4 className="font-bold" style={{ fontSize: footerConfig.fontSettings.headingSize }}>{siteConfig.name}</h4>
                                         <div className="space-y-1 opacity-80" style={{ fontSize: footerConfig.fontSettings.subHeadingSize }}>
-                                            {footerConfig.contactInfo.address && <p className="flex items-center gap-2"><MapPin className="w-4 h-4" /> {footerConfig.contactInfo.address}</p>}
-                                            {footerConfig.contactInfo.email && <p className="flex items-center gap-2"><Mail className="w-4 h-4" /> {footerConfig.contactInfo.email}</p>}
-                                            {footerConfig.contactInfo.phone && <p className="flex items-center gap-2"><Phone className="w-4 h-4" /> {footerConfig.contactInfo.phone}</p>}
+                                            {footerConfig.contactInfo.address && <p className="flex items-center gap-2"><MapPin className="w-4 h-4" style={{ color: 'var(--icon-color)' }} /> {footerConfig.contactInfo.address}</p>}
+                                            {footerConfig.contactInfo.email && <p className="flex items-center gap-2"><Mail className="w-4 h-4" style={{ color: 'var(--icon-color)' }} /> {footerConfig.contactInfo.email}</p>}
+                                            {footerConfig.contactInfo.phone && <p className="flex items-center gap-2"><Phone className="w-4 h-4" style={{ color: 'var(--icon-color)' }} /> {footerConfig.contactInfo.phone}</p>}
                                         </div>
                                     </div>
                                     <div className="flex gap-4">
-                                        {footerConfig.socialLinks.linkedin && <a href={footerConfig.socialLinks.linkedin} className="hover:opacity-80"><Linkedin className="w-6 h-6" /></a>}
-                                        {footerConfig.socialLinks.facebook && <a href={footerConfig.socialLinks.facebook} className="hover:opacity-80"><Facebook className="w-6 h-6" /></a>}
-                                        {footerConfig.socialLinks.twitter && <a href={footerConfig.socialLinks.twitter} className="hover:opacity-80"><Twitter className="w-6 h-6" /></a>}
-                                        {footerConfig.socialLinks.instagram && <a href={footerConfig.socialLinks.instagram} className="hover:opacity-80"><Instagram className="w-6 h-6" /></a>}
+                                        {footerConfig.socialLinks.linkedin && <a href={footerConfig.socialLinks.linkedin} className="hover:opacity-80"><Linkedin className="w-6 h-6" style={{ color: 'var(--icon-color)' }} /></a>}
+                                        {footerConfig.socialLinks.facebook && <a href={footerConfig.socialLinks.facebook} className="hover:opacity-80"><Facebook className="w-6 h-6" style={{ color: 'var(--icon-color)' }} /></a>}
+                                        {footerConfig.socialLinks.twitter && <a href={footerConfig.socialLinks.twitter} className="hover:opacity-80"><Twitter className="w-6 h-6" style={{ color: 'var(--icon-color)' }} /></a>}
+                                        {footerConfig.socialLinks.instagram && <a href={footerConfig.socialLinks.instagram} className="hover:opacity-80"><Instagram className="w-6 h-6" style={{ color: 'var(--icon-color)' }} /></a>}
                                     </div>
                                 </div>
                             )}
 
                             <div className="max-w-7xl mx-auto mt-12 pt-8 border-t border-white/10 text-center text-sm opacity-50">
                                 {getLocalizedText(footerConfig.copyright, currentLanguage)}
-                                {footerConfig.template === 'Corporate' && <div className="mt-2">{footerConfig.subFooterText}</div>}
+                                {footerConfig.template === 'Corporate' && <div className="mt-2">{getGlobalTranslation('footer_sub', translationItems, currentLanguage, footerConfig.subFooterText)}</div>}
                             </div>
                         </footer>
                     </div>
@@ -1342,16 +1498,16 @@
             </div>
 
             {/* Editor HUD */}
-            {viewMode === ViewMode.EDIT && (
+            {/* {viewMode === ViewMode.EDIT && (
                 <div className="absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-900/90 text-white px-6 py-3 rounded-none shadow-2xl backdrop-blur flex items-center gap-4 border border-white/10 z-50">
                     <div className="flex items-center gap-2">
-                        <div className="w-2 h-2 bg-green-500 rounded-none animate-pulse"></div>
+                        <div className="w-2 h-2 rounded-none animate-pulse" style={{ backgroundColor: 'var(--status-success, #16a34a)' }}></div>
                         <span className="text-xs font-bold uppercase tracking-wider">Editor Active</span>
                     </div>
                     <div className="h-4 w-px bg-white/20"></div>
                     <span className="text-sm font-medium">{getLocalizedText(activePage?.title ?? '', currentLanguage)}</span>
                 </div>
-            )}
+            )} */}
         </div>
     );
 };
